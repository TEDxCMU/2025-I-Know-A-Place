(this["webpackJsonpstory-map"]=this["webpackJsonpstory-map"]||[]).push([[0],{18:function(e,t,a){e.exports={title:"StorySubmit_title__2Uz1x",label:"StorySubmit_label__UKE5V",input:"StorySubmit_input__1DsmD",submit:"StorySubmit_submit__JU9U1",disabled:"StorySubmit_disabled__2hfQA",success:"StorySubmit_success__27Cwq"}},24:function(e,t,a){e.exports={block:"About_block__4ubUu",header:"About_header__ejYEm",title:"About_title__1DXaD"}},31:function(e,t,a){e.exports={title:"Login_title__bh47u",container:"Login_container__1Oz4Y",label:"Login_label__26BqS",input:"Login_input__1zhXD",button:"Login_button__3J267",error:"Login_error__17Wu6"}},43:function(e,t,a){e.exports={container:"Footer_container__st7Zp",link:"Footer_link__Xabb2"}},48:function(e,t,a){e.exports={container:"InfoPanel_container__2q9pH",title:"InfoPanel_title__10rDf",span:"InfoPanel_span__1NTpi",body:"InfoPanel_body__2lWp0"}},57:function(e,t,a){e.exports={container:"Header_container__1VC87",logo:"Header_logo__3_SJs",link:"Header_link__2wI74"}},58:function(e,t,a){e.exports={container:"StoryMapView_container__2EDA5",map:"StoryMapView_map__2cuDe",popup:"StoryMapView_popup__-4i3L",cluster:"StoryMapView_cluster__2hsiZ"}},7:function(e,t,a){e.exports={title:"AdminConsole_title__3khNB",subtitle_top:"AdminConsole_subtitle_top__2Eby-",subtitle:"AdminConsole_subtitle__244Np",promptSpace:"AdminConsole_promptSpace__204wQ",container:"AdminConsole_container__DNhe3",span:"AdminConsole_span__1ckHL",story:"AdminConsole_story__3Rhn5",text:"AdminConsole_text__2-i6C",button:"AdminConsole_button__2Kdue",approve:"AdminConsole_approve__CDBWW",delete:"AdminConsole_delete__1JTqk",pending:"AdminConsole_pending__2i8y-",prompt:"AdminConsole_prompt__1RPHc",input:"AdminConsole_input__4sj3O",stories:"AdminConsole_stories__6Hycy"}},77:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(15),c=a.n(s),o=a(25),l=(a(77),a(78),a(8)),i=a(46);a(79),a(92);const r={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DATABASE_URL,projectId:"tedxcmu-narratives",storageBucket:"tedxcmu-narratives.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ID};var d=i.a.default.initializeApp(r);const j=i.a.firestore();var u=a(2);const b=Object(n.createContext)(),p=()=>Object(n.useContext)(b);var m=function(e){let{children:t}=e;const[a,s]=Object(n.useState)(null),[c,o]=Object(n.useState)(!0);return Object(n.useEffect)((()=>{const e=d.auth().onAuthStateChanged((async e=>{try{s(e||null)}catch(t){console.error("err",t)}finally{o(!1)}}));return()=>{e()}}),[]),Object(u.jsx)(b.Provider,{value:{user:a,setUser:s,loadingUser:c},children:t})},h=a(57),O=a.n(h);var x=function(){return Object(u.jsxs)("nav",{className:O.a.container,children:[Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)("img",{className:O.a.logo,src:"/tedx-logo.svg",alt:"TEDxCMU Logo"})}),Object(u.jsx)(o.b,{className:O.a.link,to:"/about",children:"ABOUT"})]})},_=a(48),S=a.n(_);var v=function(){return Object(u.jsxs)("section",{className:S.a.container,children:[Object(u.jsx)("p",{className:S.a.title,children:Object(u.jsx)("span",{className:S.a.span,children:"I KNOW A PLACE"})}),Object(u.jsx)("p",{className:S.a.body,children:"An exploration of memory and space dedicated to Carnegie Mellon's cultural diversity. We all know a place and know it very well. To get started, click on a marker for a story. If you'd like to share, click any place and make it yours."})]})},g=a(23),f=a(111),N=a(112),E=a(113),C=a(114),A=a(115),y=a(14),T=a.n(y),D=a(67),P=a.n(D),w=a(120),k=a(119),L=a(58),U=a.n(L);const R=j.collection("stories");var F=new class{getAll(){return R}add(e){return R.add(e)}update(e,t){return R.doc(e).update(t)}delete(e){return R.doc(e).delete()}},I=a(36),W=a.n(I),M=a(18),H=a.n(M);const K=j.collection("prompts");var B=new class{getAll(){return K}add(e){return K.add(e)}update(e,t){return K.doc(e).update(t)}delete(e){return K.doc(e).delete()}};var V=function(e){let{latLong:t}=e;const[a,s]=Object(n.useState)(""),[c,o]=Object(n.useState)(""),[l,i]=Object(n.useState)(""),[r,d]=Object(n.useState)([]),[j,b]=Object(n.useState)(""),[p,m]=Object(n.useState)("");return Object(n.useEffect)((()=>{!async function(){const e=B.getAll(),t=await e.get(),a=[];t.docs.forEach((e=>{const t=e.data();a.push(t.text)})),i(a[0]),d(a)}()}),[]),Object(u.jsxs)("section",{children:[!p&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:H.a.title,children:"Share Your Story:"}),Object(u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m(!0),F.add({latLong:t,name:a,email:c,prompt:l,story:{text:j},approved:!1,deleted:!1})},children:[Object(u.jsxs)("label",{className:H.a.label,children:["Start your story at your selected location: ",t.lat.toFixed(4),", ",t.lng.toFixed(4)]}),Object(u.jsx)("label",{className:H.a.label,htmlFor:"name",children:"Name (optional)"}),Object(u.jsx)("input",{className:H.a.input,id:"name",type:"text",onChange:e=>{s(e.target.value)},value:a}),Object(u.jsx)("label",{className:H.a.label,htmlFor:"email",children:"Email (only used for email confirmation purposes)"}),Object(u.jsx)("input",{className:H.a.input,id:"email",type:"text",onChange:e=>{o(e.target.value)},value:c,required:!0}),Object(u.jsx)("label",{className:H.a.label,htmlFor:"prompt",children:"Choose a prompt:"}),Object(u.jsx)("select",{className:H.a.input,id:"prompt",value:l,onChange:e=>{i(e.target.value)},children:r.map(((e,t)=>Object(u.jsx)("option",{value:e,children:e},t)))}),Object(u.jsx)("label",{className:H.a.label,htmlFor:"story",children:"Your Story"}),Object(u.jsx)("textarea",{className:H.a.input,id:"story",rows:"10",cols:"30",value:j,onChange:e=>{b(e.target.value)},required:!0}),Object(u.jsx)("button",{className:W()(H.a.submit,{[H.a.disabled]:!(j&&c)}),type:"submit",disabled:!(j&&c),children:"Submit"})]})]}),p&&Object(u.jsx)("p",{className:H.a.success,children:"Submitted successfully! You will recieve an email when our team reviews and publishes your story. Thank you!"})]})};const q=T.a.icon({iconUrl:"/marker.svg",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-40]}),z=[40.442,-79.942];function J(e){let{selectionMarker:t,setSelectionMarker:a,handleClickOpen:n}=e;return Object(f.a)({click(e){const{lat:t,lng:s}=e.latlng;a({lat:t,lng:s}),setTimeout((()=>{n(!0)}),300)}}),t?Object(u.jsx)(N.a,{position:t,icon:q}):null}var Y=function(){const[e,t]=Object(n.useState)([]),[a,s]=Object(n.useState)(null),[c,o]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{!async function(){const e=F.getAll(),a=[];(await e.get()).docs.forEach((e=>{const t=e.data();if(t.approved){const n=[t.latLong.lat,t.latLong.lng];a.push(Object(g.a)(Object(g.a)({id:e.id},t),{},{latLong:n}))}})),t(a)}()}),[]),Object(u.jsxs)("div",{className:U.a.container,children:[Object(u.jsxs)(E.a,{className:U.a.map,center:z,zoom:16,scrollWheelZoom:!0,children:[Object(u.jsx)(J,{selectionMarker:a,setSelectionMarker:s,handleClickOpen:()=>{o(!0)}}),Object(u.jsx)(C.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png"}),Object(u.jsx)(P.a,{children:null===e||void 0===e?void 0:e.map((e=>{let{id:t,name:a,prompt:n,story:s,latLong:c}=e;return Object(u.jsx)(N.a,{position:c,icon:q,children:Object(u.jsxs)(A.a,{className:U.a.popup,children:[a&&""!==a?Object(u.jsxs)("b",{children:[a,Object(u.jsx)("br",{})]}):"",Object(u.jsx)("i",{children:n}),Object(u.jsx)("br",{}),s.text]})},t)}))})]}),Object(u.jsx)(w.a,{open:c,onClose:e=>{o(!1)},children:Object(u.jsx)(k.a,{children:Object(u.jsx)(V,{latLong:a})})})]})};var G=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x,{}),Object(u.jsx)(v,{}),Object(u.jsx)(Y,{})]})},X=a(7),Z=a.n(X);var Q=function(){const e=p(),t=Object(l.f)(),[a,s]=Object(n.useState)([]),[c,o]=Object(n.useState)([]),[i,r]=Object(n.useState)([]),[d,j]=Object(n.useState)([]);return Object(n.useEffect)((()=>{e.user?(async function(){const e=F.getAll(),t=await e.get(),a=[],n=[];t.docs.forEach((e=>{const t=e.data();t.approved||t.deleted||a.push(Object(g.a)({id:e.id},t)),!t.approved&&t.deleted&&n.push(Object(g.a)({id:e.id},t))})),r(a),j(n)}(),async function(){const e=B.getAll(),t=await e.get(),a=[];t.docs.forEach((e=>{const t=e.data();a.push(t.text)})),s(a)}()):t.push("/login")}),[t,e]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h1",{className:Z.a.title,children:["Admin ",Object(u.jsx)("span",{className:Z.a.span,children:"DASHBOARD"})]}),Object(u.jsxs)("section",{className:Z.a.container,children:[Object(u.jsx)("h2",{className:Z.a.subtitle_top,children:"Add Prompts"}),Object(u.jsx)("p",{children:"Change/Delete options coming soon."}),Object(u.jsxs)("div",{children:[Object(u.jsx)("ul",{className:Z.a.promptSpace,children:null===a||void 0===a?void 0:a.map(((e,t)=>Object(u.jsx)("li",{children:Object(u.jsx)("p",{children:e})},t)))}),Object(u.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=a;t.push(c),B.add({text:c}),o(""),s(t)},children:[Object(u.jsx)("input",{className:Z.a.input,id:"customPrompt",type:"text",placeholder:"Enter new prompt here",onChange:e=>{o(e.target.value)},value:c,required:!0}),Object(u.jsx)("button",{className:W()(Z.a.button,Z.a.prompt),disabled:!c,children:"Add Prompt"})]})]}),Object(u.jsx)("h2",{className:Z.a.subtitle,children:"Pending Stories"}),null===i||void 0===i?void 0:i.map((e=>{let{id:t,name:a,email:n,prompt:s,story:c}=e;return Object(u.jsxs)("div",{className:Z.a.story,children:[Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Name"})," : ",a]}),Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Email"})," : ",n]}),Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Prompt"})," : ",s]}),Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Story"})," : ",c.text]}),Object(u.jsx)("button",{className:W()(Z.a.button,Z.a.approve),onClick:()=>(e=>{const t=i.filter((t=>t.id!==e));r(t),F.update(e,{approved:!0,deleted:!1})})(t),children:"Approve"}),Object(u.jsx)("button",{className:W()(Z.a.button,Z.a.delete),onClick:()=>(e=>{const t=i.filter((t=>t.id!==e)),a=i.filter((t=>t.id===e));let n=d;n=n.concat(a),r(t),j(n),F.update(e,{approved:!1,deleted:!0})})(t),children:"Deny"}),Object(u.jsx)("br",{})]},t)})),Object(u.jsx)("h2",{className:Z.a.subtitle,children:"Denied Stories"}),null===d||void 0===d?void 0:d.map((e=>{let{id:t,name:a,email:n,prompt:s,story:c}=e;return Object(u.jsxs)("div",{className:Z.a.story,children:[Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Name"})," : ",a]}),Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Email"})," : ",n]}),Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Prompt"})," : ",s]}),Object(u.jsxs)("p",{className:Z.a.text,children:[Object(u.jsx)("i",{children:"Story"})," : ",c.text]})]},t)}))]})]})};var $=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x,{}),Object(u.jsx)(Q,{})]})},ee=a(31),te=a.n(ee);var ae=function(){const e=p(),t=Object(l.f)(),[a,s]=Object(n.useState)(""),[c,o]=Object(n.useState)(""),[r,j]=Object(n.useState)(null);return Object(n.useEffect)((()=>{e.user&&t.push("/admin")}),[t,e]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:te.a.title,children:"Login"}),Object(u.jsxs)("form",{className:te.a.container,children:[Object(u.jsx)("label",{className:te.a.label,htmlFor:"email",children:"Email"}),Object(u.jsx)("input",{className:te.a.input,type:"text",name:"email",autoComplete:"email",value:a,onChange:e=>{s(e.target.value)}}),Object(u.jsx)("label",{className:te.a.label,htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{className:te.a.input,type:"password",name:"password",autoComplete:"password",value:c,onChange:e=>{o(e.target.value)}}),Object(u.jsx)("button",{className:te.a.button,type:"submit",onClick:async e=>{e.preventDefault();try{await d.auth().setPersistence(i.a.auth.Auth.Persistence.LOCAL),await d.auth().signInWithEmailAndPassword(a,c),t.push("/admin")}catch(n){j(n.message)}},children:"Log In"}),Object(u.jsx)("div",{className:te.a.error,role:"alert",children:r&&r})]})]})};var ne=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x,{}),Object(u.jsx)(ae,{})]})},se=a(24),ce=a.n(se);var oe=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("section",{className:W()(ce.a.block,ce.a.header),children:[Object(u.jsx)("h1",{className:ce.a.title,children:"About"}),Object(u.jsx)("p",{className:ce.a.text,children:"I Know A Place is a joint venture by TEDxCMU Innovation and TEDxCMU Salon."})]}),Object(u.jsxs)("section",{className:ce.a.block,children:[Object(u.jsx)("h2",{className:ce.a.title,children:"Salon"}),Object(u.jsxs)("p",{className:ce.a.text,children:["TEDxCMU Salon is a tight-knit team that uplifts student voices and strengthens our Carnegie Mellon community through self-curated events, projects, and gatherings outside of the annual TEDx mainstage conference. We strive for relevance to our current collective moment and impact on community. Feel free to engage with our past events, including Black Academics Matter, via ",Object(u.jsx)("a",{href:"https://www.tedxcmu.org/",children:"tedxcmu.org"}),"."]})]}),Object(u.jsxs)("section",{className:ce.a.block,children:[Object(u.jsx)("h2",{className:ce.a.title,children:"Innovation"}),Object(u.jsxs)("p",{className:ce.a.text,children:["The TEDxCMU Innovation team creates interactive experiences for the TEDxCMU board and its events. We spearhead challenging and creative projects, using technology to deliver impactful solutions. Past projects include our TEDxCMU mobile app, virtual platforms for our main events, and an LED matrix. We also curate local innovators for the annual TEDxCMU Innovation Expo in the Spring to accompany our main event. Feel free to check out some of our past projects on ",Object(u.jsx)("a",{href:"https://github.com/TEDxCMU",children:"our Github"}),"."]})]})]})};var le=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x,{}),Object(u.jsx)(oe,{})]})},ie=a(43),re=a.n(ie);var de=function(){return Object(u.jsxs)("footer",{className:re.a.container,children:[Object(u.jsxs)("p",{className:re.a.text,children:["Made by\xa0",Object(u.jsx)("a",{className:re.a.link,href:"https://www.tedxcmu.org/",target:"_blank",rel:"noreferrer noopener",children:"TEDxCMU"})]}),Object(u.jsx)("p",{className:re.a.text,children:Object(u.jsx)(o.b,{className:re.a.link,to:"/login",children:"Admin"})})]})};var je=function(){const e=Object(l.g)();return Object(u.jsx)(m,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("div",{className:"content",children:Object(u.jsxs)(l.c,{location:e,children:[Object(u.jsx)(l.a,{path:"/",exact:!0,children:Object(u.jsx)(G,{})}),Object(u.jsx)(l.a,{path:"/close",exact:!0,children:Object(u.jsx)(G,{})}),Object(u.jsx)(l.a,{path:"/admin",exact:!0,children:Object(u.jsx)($,{})}),Object(u.jsx)(l.a,{path:"/login",exact:!0,children:Object(u.jsx)(ne,{})}),Object(u.jsx)(l.a,{path:"/about",exact:!0,children:Object(u.jsx)(le,{})})]},e.pathname)}),Object(u.jsx)(de,{})]})})};c.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(je,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.e75d6ca5.chunk.js.map